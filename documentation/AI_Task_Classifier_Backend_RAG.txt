
# AI Task Classifier – RAG Backend Explanation

This document explains everything implemented so far in the project for RAG.

---

## 1. Project Overview

The **AI Task Classifier** is a backend system built with **FastAPI** that uses a simplified
form of **Retrieval-Augmented Generation (RAG)** to help manage projects and tasks.

It can:
- Store project and task descriptions.
- Retrieve relevant information using a vector database (ChromaDB).
- Use a model (stubbed for now) to "enrich" task descriptions and estimate story points.
- Run enrichment jobs in the background.

You run the backend using:
```
cd C:\Users\scoti\PycharmProjects\AI_Task-Classifier
uvicorn Backend.main:app --reload
```

Then you can open the docs at **http://127.0.0.1:8000/docs**.

---

## 3. What Each File Does

### `main.py`
Creates the FastAPI app, includes the RAG API routes, and defines a health check endpoint.

### `api/rag.py`
Defines the API routes for interacting with the RAG system:
- **/index/project** → Save project info to the vector database.
- **/index/task** → Save a new task.
- **/retrieve** → Search for relevant context for a given task.
- **/enrich** → Start an AI enrichment process for a task (runs in background).

### `core/config.py`
Stores configuration for the backend such as:
- Directory where ChromaDB saves its data (`.chroma`).
- Model provider info (currently a stub).

### `rag/chunking.py`
Contains helper functions for text processing:
- Splits long text into smaller chunks.
- Normalizes spaces and punctuation.
- Generates unique SHA256 hashes for identifying text pieces.

### `rag/model_provider.py`
A fake AI model that simulates enrichment:
- Generates a more detailed description for tasks.
- Estimates story points based on text length.
- Returns a confidence score and used context IDs.

### `rag/retriever.py`
The main class `RAGService` handles communication with the vector database:
- **index_project()** → Stores project descriptions.
- **index_task()** → Stores tasks with metadata.
- **retrieve()** → Searches the database for similar texts (context).

### `rag/vector_store.py`
A wrapper around **ChromaDB**, which stores and retrieves text embeddings.
Each project has its own “collection.”
It supports:
- Adding or updating text (`upsert_texts`)
- Removing text for a task (`delete_by_task`)
- Querying similar chunks (`query`)

### `rag/types.py`
Defines Pydantic models (schemas) used for request and response validation.
Examples:
- `IndexProjectRequest`
- `IndexTaskRequest`
- `RetrieveResponse`
- `EnrichResult`

### `rag/worker.py`
Handles AI enrichment jobs in the background using FastAPI’s `BackgroundTasks`.
Steps performed:
1. Retrieves relevant context for the task.
2. Calls the AI model to generate an enriched description.
3. Re-indexes the updated task (temporary persistence).

---

## 4. How the System Works (Workflow)

1. **User creates a project** → `/rag/index/project`
   - Saves project description in ChromaDB as text chunks.

2. **User adds tasks to a project** → `/rag/index/task`
   - Each task is stored separately with `taskId` and `projectId`.

3. **User requests AI help** → `/rag/enrich`
   - Background worker retrieves relevant info and calls the AI model.

4. **AI generates improved text** and story points.
   - This result can later be displayed in the dashboard.

Each task remains separate because of the unique `taskId`.
Tasks and projects can be searched or updated without mixing their contexts.

---

## 5. Key Technologies -> check the requirements.txt

| Component | Purpose |
|------------|----------|
| **FastAPI** | Web framework for routes and background tasks |
| **ChromaDB** | Vector database for semantic search |
| **Pydantic** | Data validation for request models |
| **Python 3.13+** | Programming language used |
| **Uvicorn** | ASGI server for running FastAPI |

---

## 6. Example Flow

- User creates *Project 1*.
- Adds *Task 1* and *Task 2* to it.
- Calls `/rag/enrich` for Task 1 → AI generates story points and better description.
- Calls `/rag/enrich` for Task 2 → separate AI result for that task.
- Each task keeps its own “AI memory” and can later be retrieved independently.

---

## 7. Next Steps

- Connect to a real AI model (like OpenAI or Gemini).
- Add a PostgreSQL database to permanently store projects and tasks.
- Connect the frontend (SmartPM interface) to these endpoints.
- Implement authentication and user roles.

---

**Author:** Informatics Student  
**Project:** SmartPM – AI Task Classifier (RAG Backend)
